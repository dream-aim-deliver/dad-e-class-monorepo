// Auto-generated by page-scaffold command v2
// Notion: https://www.notion.so/Order-history-Orders-Payments-Student-workspace-6bb2794c7331418e8fbbf83c40dcb1e5
// Usecases: listUserIncomingTransactions, generateInvoicePdf
// Features: View transaction history, Download/Generate invoices
// UI Components: BaseGrid, Transaction list, Invoice download buttons
// User Types: Student

import { HydrateClient, prefetch, trpc } from '../config/trpc/cms-server';
import { Suspense } from 'react';
import DefaultLoadingWrapper from '../../client/wrappers/default-loading';
import OrderHistory from '../../client/pages/order-history';
import { TLocale } from '@maany_shr/e-class-translations';

interface OrderHistoryServerComponentProps {
  locale: TLocale;
}

export default async function OrderHistoryServerComponent(
  props: OrderHistoryServerComponentProps
) {
  // TRPC prefetching for page data using EXACT usecase names from Notion
  await Promise.all([
    prefetch(trpc.listUserIncomingTransactions.queryOptions({})),
  ]);

  return (
    <HydrateClient>
      <Suspense fallback={<DefaultLoadingWrapper />}>
        <OrderHistory locale={props.locale} />
      </Suspense>
    </HydrateClient>
  );
}
