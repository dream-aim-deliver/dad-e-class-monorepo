'use client';

// Auto-generated by page-scaffold command v2
// Notion: https://www.notion.so/Add-Group-Session-View-coach-workspace-11136e9f772641f297768fb72282218a
// Usecases from Notion: createGroupCoachingSession (NOT IMPLEMENTED), listGroupCoachingSessions, listCoachingOfferings
// User Types from Notion: Coach

import { useLocale, useTranslations } from 'next-intl';
import { TLocale } from '@maany_shr/e-class-translations';
import { useSession } from 'next-auth/react';
import { z } from 'zod';

// Type definition for createGroupCoachingSession (NOT IMPLEMENTED)
// This type guides the future implementation when the usecase is ready
export const CreateGroupCoachingSessionRequest = z.object({
  groupId: z.number(),
  startTime: z.string().datetime({ offset: true }),
  coachingOfferingTitle: z.string(),
  coachingOfferingDuration: z.number(),
  coachId: z.number(),
});

export type CreateGroupCoachingSessionRequest = z.infer<typeof CreateGroupCoachingSessionRequest>;

// Response: nothing (void) - the operation just succeeds or fails

interface AddGroupSessionProps {
  locale: TLocale;
  courseSlug: string;
  groupId: string;
}

export default function AddGroupSession({ locale, courseSlug, groupId }: AddGroupSessionProps) {
  const t = useTranslations('pages.addGroupSession');
  const currentLocale = useLocale() as TLocale;
  const { data: session, status } = useSession();

  // Coach authentication check
  if (status === 'loading') {
    return <div>{t('loading')}</div>;
  }

  if (!session || !session.user?.roles?.includes('coach')) {
    return <div>{t('error.unauthorized')}</div>;
  }

  return (
    <div className="flex flex-col space-y-5 px-30">
      <div>
        <h1>{t('title')}</h1>
        <p>{t('description')}</p>
      </div>

      {/* Usecases from Notion:
        - createGroupCoachingSession (NOT IMPLEMENTED - see type definition above)
        - listGroupCoachingSessions
        - listCoachingOfferings
      */}

      {/* IMPORTANT: createGroupCoachingSession is not implemented yet.
          When ready, use the CreateGroupCoachingSessionRequest type defined above.
          The response will be void (just success/failure).
      */}

      <div className="bg-yellow-100 border-l-4 border-yellow-500 p-4">
        <p className="text-sm">
          Course: {courseSlug}, Group: {groupId}
        </p>
      </div>
    </div>
  );
}
