// Auto-generated by page-scaffold command
// Notion: https://www.notion.so/CMS-Manage-Categories-13a5a7432d01807da446eb7172031fcd
// Features: listCategories, updateCategory, deleteCategory, createCategory
// User Types: CMS

import { HydrateClient, getServerTRPC, prefetch } from '../config/trpc/cms-server';
import { Suspense } from 'react';
import DefaultLoadingWrapper from '../../client/wrappers/default-loading';
import ManageCategories from '../../client/pages/manage-categories';

interface ManageCategoriesProps {
    platformSlug: string;
    platformLocale: string;
    locale: string;
}

export default async function ManageCategoriesServerComponent(props: ManageCategoriesProps) {
    // Get platform-aware TRPC proxy - single line, always works!
    const trpc = getServerTRPC({
        platform_slug: props.platformSlug,
        platform_locale: props.platformLocale,
    });

    // Prefetch categories data for better performance
    await Promise.all([
        prefetch(trpc.listCategories.queryOptions({})),
    ]);

    return (
        <HydrateClient>
            <Suspense fallback={<DefaultLoadingWrapper />}>
                <ManageCategories
                    platformSlug={props.platformSlug}
                    platformLocale={props.platformLocale}
                />
            </Suspense>
        </HydrateClient>
    );
}
