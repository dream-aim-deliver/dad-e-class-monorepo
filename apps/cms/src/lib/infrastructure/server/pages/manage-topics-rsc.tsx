// Auto-generated by page-scaffold command
// Notion: https://www.notion.so/CMS-Manage-Topics-13a5a7432d0180078589efbb54a14f5b
// Features: createTopic, and 3 other features
// User Types: CMS

import { HydrateClient, getServerTRPC, prefetch } from '../config/trpc/cms-server';
import { Suspense } from 'react';
import DefaultLoadingWrapper from '../../client/wrappers/default-loading';
import ManageTopics from '../../client/pages/manage-topics';

interface ManageTopicsProps {
    platformSlug: string;
    platformLocale: string;
    platformName: string;
    locale: string;
}

export default async function ManageTopicsServerComponent(props: ManageTopicsProps) {
    // Get platform-aware TRPC proxy - single line, always works!
    const trpc = getServerTRPC({
        platform_slug: props.platformSlug,
        platform_locale: props.platformLocale,
    });

    // TODO: Add TRPC prefetching for your page data
    // Based on discovered patterns in this project:
    // await Promise.all([
    //     prefetch(trpc.listTopics.queryOptions({})),
    //     prefetch(trpc.getTopicDetails.queryOptions({ topicId: 'some-id' })),
    // ]);

    return (
        <HydrateClient>
            <Suspense fallback={<DefaultLoadingWrapper />}>
                <ManageTopics
                    platformSlug={props.platformSlug}
                    platformLocale={props.platformLocale}
                    platformName={props.platformName}
                />
            </Suspense>
        </HydrateClient>
    );
}
